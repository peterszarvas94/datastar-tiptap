{{define "index"}}
<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <title>{{.Title}}</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/static/generated.css" />
    <script type="importmap">
      {
        "imports": {
          "js-beautify": "/static/vendor/js-beautify/index.js",
          "tiptap-bundle": "/static/vendor/tiptap.bundle.js",
          "datastar": "/static/vendor/datastar/datastar.js"
        }
      }
    </script>
    <script type="module" src="/static/main.js"></script>
  </head>
  <body class="min-h-screen">
    <div class="mx-auto w-full max-w-5xl space-y-6 px-6 py-8">
      <header class="space-y-2">
        <h1 class="text-3xl font-bold">{{.Title}}</h1>
        <p class="text-base-content/70">
          Tiptap editor with a minimal server-backed workspace.
        </p>
      </header>

      <section class="card shadow-soft">
        <div class="card-body space-y-4">
          <div class="flex flex-wrap items-center justify-between gap-3">
            <h2 class="text-lg font-semibold">Editor</h2>
          </div>
          <div class="card shadow-sm">
            <div class="card-body p-0">
              <div
                id="toolbar"
                class="flex flex-wrap gap-1 border-b border-base-300 bg-base-200 p-3"
              >
                <button
                  id="btn-bold"
                  title="Bold (Ctrl+B)"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#bold" /></svg>
                </button>
                <button
                  id="btn-italic"
                  title="Italic (Ctrl+I)"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#italic" /></svg>
                </button>
                <button
                  id="btn-strike"
                  title="Strikethrough"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#strikethrough" /></svg>
                </button>
                <span class="mx-1 h-7 w-px bg-base-300"></span>
                <button
                  id="btn-paragraph"
                  title="Paragraph"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#heading" /></svg>
                </button>
                <button
                  id="btn-h1"
                  title="Heading 1"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#heading-1" /></svg>
                </button>
                <button
                  id="btn-h2"
                  title="Heading 2"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#heading-2" /></svg>
                </button>
                <button
                  id="btn-h3"
                  title="Heading 3"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#heading-3" /></svg>
                </button>
                <span class="mx-1 h-7 w-px bg-base-300"></span>
                <button
                  id="btn-bullet"
                  title="Bullet List"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#list" /></svg>
                </button>
                <button
                  id="btn-ordered"
                  title="Numbered List"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#list-ordered" /></svg>
                </button>
                <span class="mx-1 h-7 w-px bg-base-300"></span>
                <button
                  id="btn-blockquote"
                  title="Blockquote"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#quote" /></svg>
                </button>
                <button
                  id="btn-code"
                  title="Code Block"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#code" /></svg>
                </button>
                <span class="mx-1 h-7 w-px bg-base-300"></span>
                <button
                  id="btn-undo"
                  title="Undo (Ctrl+Z)"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#undo" /></svg>
                </button>
                <button
                  id="btn-redo"
                  title="Redo (Ctrl+Shift+Z)"
                  class="btn btn-sm btn-square"
                >
                  <svg width="16" height="16"><use href="#redo" /></svg>
                </button>
                <span class="mx-1 h-7 w-px bg-base-300"></span>
                <button id="btn-save" title="Save" class="btn btn-sm btn-primary">
                  <svg width="16" height="16"><use href="#save" /></svg>
                </button>
              </div>
              <div id="editor" class="min-h-[360px] p-6"></div>
            </div>
          </div>

          <div class="card shadow-sm">
            <div class="card-body">
              <div class="flex items-center justify-between">
                <h3 class="text-base font-semibold">Stored HTML</h3>
                <button id="btn-copy" title="Copy to clipboard" class="btn btn-sm btn-square">
                  <svg width="16" height="16"><use href="#copy" /></svg>
                </button>
              </div>
              <pre
                id="db-preview"
                class="rounded-xl bg-base-200 p-4 text-sm text-base-content/80 overflow-x-auto whitespace-pre-wrap"
              ></pre>
            </div>
          </div>

          <div class="card shadow-sm">
            <div class="card-body">
              <h3 class="text-base font-semibold">Rendered Preview</h3>
              <div
                id="rendered-preview"
                class="tiptap rounded-xl bg-base-200 p-6"
              ></div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- SVG icon sprite - copied from lucide-static v0.563.0 (ISC license) -->
    <svg style="display: none" xmlns="http://www.w3.org/2000/svg">
      <symbol
        id="bold"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"
        />
      </symbol>
      <symbol
        id="italic"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="19" x2="10" y1="4" y2="4" />
        <line x1="14" x2="5" y1="20" y2="20" />
        <line x1="15" x2="9" y1="4" y2="20" />
      </symbol>
      <symbol
        id="strikethrough"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M16 4H9a3 3 0 0 0-2.83 4" />
        <path d="M14 12a4 4 0 0 1 0 8H6" />
        <line x1="4" x2="20" y1="12" y2="12" />
      </symbol>
      <symbol
        id="heading"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M6 12h12" />
        <path d="M6 20V4" />
        <path d="M18 20V4" />
      </symbol>
      <symbol
        id="heading-1"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M4 12h8" />
        <path d="M4 18V6" />
        <path d="M12 18V6" />
        <path d="m17 12 3-2v8" />
      </symbol>
      <symbol
        id="heading-2"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M4 12h8" />
        <path d="M4 18V6" />
        <path d="M12 18V6" />
        <path d="M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1" />
      </symbol>
      <symbol
        id="heading-3"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M4 12h8" />
        <path d="M4 18V6" />
        <path d="M12 18V6" />
        <path d="M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2" />
        <path d="M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2" />
      </symbol>
      <symbol
        id="list"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M3 5h.01" />
        <path d="M3 12h.01" />
        <path d="M3 19h.01" />
        <path d="M8 5h13" />
        <path d="M8 12h13" />
        <path d="M8 19h13" />
      </symbol>
      <symbol
        id="list-ordered"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M11 5h10" />
        <path d="M11 12h10" />
        <path d="M11 19h10" />
        <path d="M4 4h1v5" />
        <path d="M4 9h2" />
        <path d="M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02" />
      </symbol>
      <symbol
        id="quote"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"
        />
        <path
          d="M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z"
        />
      </symbol>
      <symbol
        id="code"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="m16 18 6-6-6-6" />
        <path d="m8 6-6 6 6 6" />
      </symbol>
      <symbol
        id="undo"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M3 7v6h6" />
        <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13" />
      </symbol>
      <symbol
        id="redo"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M21 7v6h-6" />
        <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7" />
      </symbol>
      <symbol
        id="save"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"
        />
        <path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7" />
        <path d="M7 3v4a1 1 0 0 0 1 1h7" />
      </symbol>
      <symbol
        id="copy"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
        <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
      </symbol>
    </svg>
  </body>
</html>
{{end}}
